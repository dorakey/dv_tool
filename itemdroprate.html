
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: #f4f4f4; }
        .password-prompt {
            background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;
        }
        .password-prompt input[type="password"] {
            padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; width: 200px;
        }
        .password-prompt button {
            padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;
        }
        .password-prompt button:hover { background-color: #0056b3; }
        /* iframeを画面全体に表示するためのスタイル */
        #contentIframe { 
            display: none; 
            width: 100%; 
            height: 100vh;
            border: none;
        }
    </style>
</head>
<body>
    <div id="passwordPrompt" class="password-prompt">
        <h2>ENTER PASSWORD</h2>
        <input type="password" id="pagePassword" placeholder="">
        <button id="submitPassword">Confirm</button>
        <p id="errorMessage" style="color: red; display: none; margin-top: 10px;">Wrong password</p>
    </div>

    <iframe id="contentIframe"></iframe>

    <script>
        const correctEncodedPassword = 'dGVzdA==';
        const encryptedContentFlag = false;
        const originalContentRaw = "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJqYSI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPg0KICA8dGl0bGU+W0RWLVRlYW1dIERyb3BSYXRlQ29udHJvbDwvdGl0bGU+DQogIDxzdHlsZT4NCiAgICBib2R5IHsgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IHBhZGRpbmc6IDIwcHg7IG1heC13aWR0aDogNjEwcHg7IH0NCiAgICBpbnB1dFt0eXBlPSJudW1iZXIiXSB7IHdpZHRoOiA4MHB4OyB9DQogICAgLm91dHB1dCB7IG1hcmdpbi10b3A6IDIwcHg7IHBhZGRpbmc6IDEwcHg7IGJvcmRlcjogMXB4IHNvbGlkICNjY2M7IGJhY2tncm91bmQ6ICNmOWY5Zjk7IHdoaXRlLXNwYWNlOiBwcmU7IH0NCg0KICAgIC8qIOODouODvOODieWIh+OCiuabv+OBiOODnOOCv+ODs+OBruOCueOCv+OCpOODqyAqLw0KICAgIC5tb2RlLWJ1dHRvbnMgYnV0dG9uIHsNCiAgICAgIHBhZGRpbmc6IDhweCAxNXB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiA1cHg7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICB9DQoNCiAgICAjY3VycmVudE1vZGVUZXh0IHsNCiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgY29sb3I6ICMwMDdiZmY7IC8qIOODouODvOODieODhuOCreOCueODiOOBruiJsiAqLw0KICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgfQ0KDQogICAgI2luaUxvYWRTdGF0dXMgeyAvKiDoqq3jgb/ovrzjgb/jgrnjg4bjg7zjgr/jgrnjga7jgrnjgr/jgqTjg6sgKi8NCiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgfQ0KDQogICAgLyog44ON44Kk44OG44Kj44OW44Gu44OV44Kh44Kk44Or5YWl5Yqb44OV44Kj44O844Or44OJ44KS6Z2e6KGo56S644Gr44GZ44KLICovDQogICAgI2luaUZpbGUgew0KICAgICAgZGlzcGxheTogbm9uZTsNCiAgICB9DQoNCiAgICAvKiDjgqvjgrnjgr/jg6Djg5XjgqHjgqTjg6vpgbjmip7jg5zjgr/jg7Pjga7jgrnjgr/jgqTjg6sgKi8NCiAgICAjY3VzdG9tRmlsZUJ1dHRvbiB7DQogICAgICBwYWRkaW5nOiA4cHggMTVweDsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTBlMGUwOw0KICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgZm9udC1zaXplOiAxNHB4OyAvKiDjg5zjgr/jg7Pjga7jg5Xjgqnjg7Pjg4jjgrXjgqTjgrrjgpLoqr/mlbQgKi8NCiAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgIG1hcmdpbi10b3A6IDVweDsgLyog5bCR44GX44K544Oa44O844K544KS6ZaL44GR44KLICovDQogICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IC8qIOOCpOODs+ODqeOCpOODs+ODluODreODg+OCr+OBp+mao+OBq+mFjee9riAqLw0KICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgLyog5Z6C55u05pa55ZCR44Gu6YWN572uICovDQogICAgfQ0KDQogICAgI3NlbGVjdGVkRmlsZU5hbWVEaXNwbGF5IHsgLyog6YG45oqe44GV44KM44Gf44OV44Kh44Kk44Or5ZCN6KGo56S644Gu44K544K/44Kk44OrICovDQogICAgICBtYXJnaW4tbGVmdDogMTBweDsNCiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgICAgIGNvbG9yOiAjMzMzOw0KICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgLyog5Z6C55u05pa55ZCR44Gu6YWN572uICovDQogICAgfQ0KDQogICAgLyog5pu05paw5oOF5aCx44OG44Kt44K544OI44Gu44K544K/44Kk44OrICovDQogICAgLnVwZGF0ZS1pbmZvIHsNCiAgICAgIGZvbnQtc2l6ZTogMC42ZW07IC8qIOODleOCqeODs+ODiOOCteOCpOOCuuOCkuWwj+OBleOBjyAqLw0KICAgICAgY29sb3I6ICM3Nzc7DQogICAgICAvKiBwb3NpdGlvbjogcmVsYXRpdmU7ICovIC8qIOOBk+OCjOOCkuacieWKueOBq+OBmeOCi+OBqOOAgXRvcOOChG1hcmdpbi10b3Djgafoqr/mlbTjgZfjgoTjgZnjgY/jgarjgorjgb7jgZkgKi8NCiAgICAgIHRvcDogNXB4OyAvKiDml6LlrZjjga7kvY3nva7jgYvjgonlsJHjgZfkuIvjgavnp7vli5UgKi8NCiAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogICAgICBmb250LXdlaWdodDogbGlnaHRlcjsgLyog44GT44GT44KS6L+95Yqg44G+44Gf44Gv5aSJ5pu0ICovDQogICAgICBsaW5lLWhlaWdodDogMTsNCiAgICB9DQoNCiAgICBoMiB7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lOyAvKiDjg5njg7zjgrnjg6njgqTjg7Pjgafmj4PjgYjjgovjgZPjgajjgafjgIHml6Xku5jjgYzlsJHjgZfkuIvjgavjgY3jgb7jgZkgKi8NCiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgIGxpbmUtaGVpZ2h0OiAxLjI7DQogICAgfQ0KICAgIGgyIC50aXRsZS10ZXh0IHsNCiAgICAgIGZsZXgtZ3JvdzogMTsNCiAgICAgIGZvbnQtc2l6ZTogMS41ZW07DQogICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogICAgfQ0KCS8qIOOCqOODqeODvOODoeODg+OCu+ODvOOCuOOBjOmHjeOBquOCi0NTUyAqLw0KICAgIGRpdi5ub1NjcmlwdEFyZWEgew0KICAgIHotaW5kZXg6IDE7DQogICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgIHdpZHRoOiAxMDAlOw0KICAgIH0NCiAgICAvKiDooajnpLrmnqDjga7jg4fjgrbjgqTjg7PjgavlkIjjgo/jgZvjgaboqr/mlbQgKi8NCiAgICBkaXYubm9TY3JpcHRBcmVhIGgyew0KICAgIHdpZHRoOiA1MCU7DQogICAgbWFyZ2luOiBhdXRvOw0KICAgIHBhZGRpbmc6IDFyZW0gMnJlbTsNCiAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICB9DQogIDwvc3R5bGU+DQogIDxub3NjcmlwdD4NCiAgICA8c3R5bGU+DQogICAgICAgIC8qIOaTjeS9nOeEoeWKueWMliAqLw0KICAgICAgICBib2R5e3BvaW50ZXItZXZlbnRzOm5vbmU7fQ0KICAgIDwvc3R5bGU+DQo8L25vc2NyaXB0Pg0KPC9oZWFkPg0KPGJvZHk+DQogIDxoMj4NCiAgICA8c3BhbiBjbGFzcz0idGl0bGUtdGV4dCI+RHJvcFJhdGVDb250cm9sPGJyPjwvc3Bhbj4NCiAgICA8c3BhbiBjbGFzcz0idXBkYXRlLWluZm8iPihMYXN0IHVwZGF0ZTowMDo0NSAwNy8xMi8yMDI1IHZlcjoxLjAyYik8L3NwYW4+DQogIDwvaDI+DQogIDxocj4NCiAgPGxhYmVsPk1PREUgU1dJVENIOjwvbGFiZWw+DQogIDxzcGFuIGlkPSJjdXJyZW50TW9kZVRleHQiPjwvc3Bhbj4gPGRpdiBjbGFzcz0ibW9kZS1idXR0b25zIj4NCiAgICA8YnV0dG9uIGRhdGEtbW9kZT0icGVyY2VudFRvUmF0ZSIgb25jbGljaz0iY2hhbmdlTW9kZSgncGVyY2VudFRvUmF0ZScpIj4lIHRvIE5VTTwvYnV0dG9uPg0KICAgIDxidXR0b24gZGF0YS1tb2RlPSJyYXRlVG9QZXJjZW50IiBvbmNsaWNrPSJjaGFuZ2VNb2RlKCdyYXRlVG9QZXJjZW50JykiPk5VTSB0byAlPC9idXR0b24+DQogIDwvZGl2Pg0KICA8YnI+DQoNCiAgPGxhYmVsPk5vSXRlbVJhdGXvvIhNYXjvvIk6IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJtYXhSYXRlIiB2YWx1ZT0iMjUwMCIgc3RlcD0iMSI+PC9sYWJlbD48YnI+PGJyPg0KDQogIDxicj4NCiAgPGxhYmVsIGZvcj0iaW5pRmlsZSI+KE9wdGlvbmFsKTogQXV0b21hdGljIG91dHB1dCBvZiBjdXJyZW50IHNldHRpbmdzLjwvbGFiZWw+PHNwYW4gaWQ9ImluaUxvYWRTdGF0dXMiPjwvc3Bhbj48YnI+DQogIDxpbnB1dCB0eXBlPSJmaWxlIiBpZD0iaW5pRmlsZSIgYWNjZXB0PSIuaW5pIj4gPGJ1dHRvbiB0eXBlPSJidXR0b24iIGlkPSJjdXN0b21GaWxlQnV0dG9uIj5TZWxlY3QgRmlsZTwvYnV0dG9uPiA8c3BhbiBpZD0ic2VsZWN0ZWRGaWxlTmFtZURpc3BsYXkiPkxvYWQgSXRlbURyb3BSYXRlQ29udHJvbC5pbmk8L3NwYW4+IDxicj48YnI+DQogIDxkaXYgaWQ9ImlucHV0RmllbGRzIj4NCiAgICA8c3BhbiBpZD0ibW9kZURlc2NyaXB0aW9uVGV4dCI+PC9zcGFuPjxicj48aHI+DQogICAgPGxhYmVsPkFsbE1vbnN0ZXJJdGVtRHJvcDogPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImFsbE1vbnN0ZXIiIHZhbHVlPSIxMCIgc3RlcD0iMSI+PC9sYWJlbD48YnI+DQogICAgPGxhYmVsPkVhY2hNb25zdGVySXRlbURyb3A6IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJlYWNoTW9uc3RlciIgdmFsdWU9IjEwIiBzdGVwPSIxIj48L2xhYmVsPjxicj4NCiAgICA8bGFiZWw+RXZlbnRJdGVtRHJvcDogPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9ImV2ZW50SXRlbSIgdmFsdWU9IjEwIiBzdGVwPSIxIj48L2xhYmVsPjxicj4NCiAgICA8bGFiZWw+U2V0SXRlbURyb3A6IDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzZXRJdGVtIiB2YWx1ZT0iMTAiIHN0ZXA9IjEiPjwvbGFiZWw+PGJyPg0KICAgIDxsYWJlbD5aZW5Ecm9wOiA8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0iemVuIiB2YWx1ZT0iMTAiIHN0ZXA9IjEiPjwvbGFiZWw+PGJyPg0KICA8L2Rpdj4NCg0KICA8YnI+DQogIDxidXR0b24gb25jbGljaz0iY2FsY3VsYXRlKCkiPkNhbGN1bGF0ZTwvYnV0dG9uPg0KICA8aHI+DQogIDxkaXYgY2xhc3M9Im91dHB1dCIgaWQ9InJlc3VsdCI+PC9kaXY+DQogIDxzY3JpcHQ+DQogICAgbGV0IGN1cnJlbnRNb2RlID0gInBlcmNlbnRUb1JhdGUiOyAvLyDnj77lnKjjga7jg6Ljg7zjg4njgpLov73ot6HjgZnjgovlpInmlbANCg0KICAgIC8vIOWQhOODouODvOODieOBruWFpeWKm+ODleOCo+ODvOODq+ODieOBruWApOOCkuiomOaGtuOBmeOCi+OCquODluOCuOOCp+OCr+ODiA0KICAgIGNvbnN0IG1vZGVWYWx1ZXMgPSB7DQogICAgICBwZXJjZW50VG9SYXRlOiB7IC8vICUgLT4gUmF0ZSDjg6Ljg7zjg4njga7liJ3mnJ/lgKQNCiAgICAgICAgYWxsTW9uc3RlcjogMTAuMCwNCiAgICAgICAgZWFjaE1vbnN0ZXI6IDEwLjAsDQogICAgICAgIGV2ZW50SXRlbTogMTAuMCwNCiAgICAgICAgc2V0SXRlbTogMTAuMCwNCiAgICAgICAgemVuOiAxMC4wLA0KICAgICAgICBtYXhSYXRlOiAyNTAwIC8vIG1heFJhdGUg44KC5ZCr44KB44KLDQogICAgICB9LA0KICAgICAgcmF0ZVRvUGVyY2VudDogeyAvLyBSYXRlIC0+ICUg44Oi44O844OJ44Gu5Yid5pyf5YCkICjpgJrluLhJTknjgYvjgonoqq3jgb/ovrzjgb7jgozjgospDQogICAgICAgIGFsbE1vbnN0ZXI6IDE4MCwgLy8gSXRlbURyb3BSYXRlQ29udHJvbC5pbmkg44Gu5Yid5pyf5YCkDQogICAgICAgIGVhY2hNb25zdGVyOiAyMTgwLA0KICAgICAgICBldmVudEl0ZW06IDIxODEsDQogICAgICAgIHNldEl0ZW06IDIxOTMsDQogICAgICAgIHplbjogMjM5MywNCiAgICAgICAgbWF4UmF0ZTogMjM5NSAvLyBtYXhSYXRlIOOCguWQq+OCgeOCiw0KICAgICAgfQ0KICAgIH07DQoNCiAgICAvLyDlhaXlipvjg5XjgqPjg7zjg6vjg4njga5JROODquOCueODiCAobWF4UmF0ZeOBr+WIpemAlOaJseOBhuOBn+OCgeWQq+OCgeOBquOBhCkNCiAgICBjb25zdCBmaWVsZElkcyA9IFsiYWxsTW9uc3RlciIsICJlYWNoTW9uc3RlciIsICJldmVudEl0ZW0iLCAic2V0SXRlbSIsICJ6ZW4iXTsNCg0KICAgIC8vIOODmuODvOOCuOODreODvOODieaZguOBq+WIneacn+ODouODvOODieOCkuioreWumg0KICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7DQogICAgICAvLyDjgqvjgrnjgr/jg6Djg5XjgqHjgqTjg6vjg5zjgr/jg7Pjga7jgqTjg5njg7Pjg4jjg6rjgrnjg4rjg7zjgpLoqK3lrpoNCiAgICAgIGNvbnN0IGN1c3RvbUZpbGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tRmlsZUJ1dHRvbicpOw0KICAgICAgY29uc3QgaW5pRmlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmlGaWxlJyk7DQogICAgICANCiAgICAgIGN1c3RvbUZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgIGluaUZpbGUuY2xpY2soKTsgLy8g6Z2e6KGo56S644Gu44OV44Kh44Kk44Or5YWl5Yqb44KS44Kv44Oq44OD44KvDQogICAgICB9KTsNCg0KICAgICAgaW5pRmlsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBsb2FkSW5pRmlsZSk7IC8vIOODleOCoeOCpOODq+OBjOmBuOaKnuOBleOCjOOBn+OCieiqreOBv+i+vOOBv+mWouaVsOOCkuWRvOOBs+WHuuOBmQ0KICAgICAgDQogICAgICBjaGFuZ2VNb2RlKGN1cnJlbnRNb2RlKTsgLy8g44OH44OV44Kp44Or44OI44GnICUg4oaSIFJhdGUg44Gr6Kit5a6aDQogICAgfSk7DQoNCiAgICAvLyBzYXZlQ3VycmVudFZhbHVlczog54++5Zyo44Gu5YWl5Yqb44OV44Kj44O844Or44OJ44Gu5YCk44KSIG1vZGVWYWx1ZXMg44Gr5L+d5a2Y44GZ44KL44GL44Gp44GG44GLDQogICAgZnVuY3Rpb24gY2hhbmdlTW9kZShuZXdNb2RlLCBzYXZlQ3VycmVudFZhbHVlcyA9IHRydWUpIHsNCiAgICAgIGlmIChzYXZlQ3VycmVudFZhbHVlcykgew0KICAgICAgICAvLyDnj77lnKjjga7jg6Ljg7zjg4njga7lgKTjgpLkv53lrZgNCiAgICAgICAgZmllbGRJZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICAgIGlmIChpbnB1dEVsZW1lbnQpIHsNCiAgICAgICAgICAgIG1vZGVWYWx1ZXNbY3VycmVudE1vZGVdW2lkXSA9IHBhcnNlRmxvYXQoaW5wdXRFbGVtZW50LnZhbHVlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgICAvLyBtYXhSYXRlIOOCguS/neWtmA0KICAgICAgICBtb2RlVmFsdWVzW2N1cnJlbnRNb2RlXS5tYXhSYXRlID0gcGFyc2VJbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1heFJhdGUiKS52YWx1ZSwgMTApOw0KICAgICAgfQ0KDQogICAgICBjdXJyZW50TW9kZSA9IG5ld01vZGU7DQogICAgICBjb25zdCBjdXJyZW50TW9kZVRleHRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRNb2RlVGV4dCcpOw0KICAgICAgY29uc3QgbW9kZURlc2NyaXB0aW9uVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZURlc2NyaXB0aW9uVGV4dCcpOw0KICAgICAgDQogICAgICAvLyDjg6Ljg7zjg4njg4bjgq3jgrnjg4jjga7mm7TmlrANCiAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gInBlcmNlbnRUb1JhdGUiKSB7DQogICAgICAgIGN1cnJlbnRNb2RlVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSAiJSB0byBOVU0iOw0KICAgICAgICBjdXJyZW50TW9kZVRleHRFbGVtZW50LnN0eWxlLmNvbG9yID0gImJsdWUiOyAvLyDpnZLoibLjgavoqK3lrpoNCiAgICAgICAgbW9kZURlc2NyaXB0aW9uVGV4dEVsZW1lbnQuaW5uZXJIVE1MID0gIjxzcGFuIHN0eWxlPSdjb2xvcjpibHVlOyc+PGI+JSB0byBOVU08L2I+PC9zcGFuPjogU3BlY2lmeSBhcyBhIHBlcmNlbnRhZ2UuIjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGN1cnJlbnRNb2RlVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSAiTlVNIHRvICUiOw0KICAgICAgICBjdXJyZW50TW9kZVRleHRFbGVtZW50LnN0eWxlLmNvbG9yID0gImdyZWVuIjsgLy8g57eR6Imy44Gr6Kit5a6aDQogICAgICAgIG1vZGVEZXNjcmlwdGlvblRleHRFbGVtZW50LmlubmVySFRNTCA9ICI8c3BhbiBzdHlsZT0nY29sb3I6Z3JlZW47Jz48Yj5OVU0gdG8gJTwvYj48L3NwYW4+OiBTcGVjaWZ5IGFzIGEgaGllcmFyY2hpY2FsIHZhbHVlcy4iOw0KICAgICAgfQ0KDQogICAgICAvLyDmlrDjgZfjgYTjg6Ljg7zjg4njga7lgKTjgpLlhaXlipvjg5XjgqPjg7zjg6vjg4njgavlj43mmKDjgZfjgIFzdGVw5bGe5oCn44KC5pu05pawDQogICAgICBmaWVsZElkcy5mb3JFYWNoKGlkID0+IHsNCiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgICAgICBpZiAoaW5wdXRFbGVtZW50KSB7DQogICAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gbW9kZVZhbHVlc1tjdXJyZW50TW9kZV1baWRdOw0KICAgICAgICAgIGlucHV0RWxlbWVudC5zdGVwID0gKGN1cnJlbnRNb2RlID09PSAicGVyY2VudFRvUmF0ZSIpID8gMC4xIDogMTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICAvLyBtYXhSYXRlIOOCguWPjeaYoA0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1heFJhdGUiKS52YWx1ZSA9IG1vZGVWYWx1ZXNbY3VycmVudE1vZGVdLm1heFJhdGU7DQogICAgICANCiAgICAgIC8vIOODouODvOODieWIh+OCiuabv+OBiOaZguOBq+e1kOaenOihqOekuuashOOCkuOCr+ODquOCog0KICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdCIpLmlubmVySFRNTCA9ICIiOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZSgpIHsNCiAgICAgIC8vIOioiOeul+WJjeOBq+ePvuWcqOOBruWFpeWKm+WApOOCkuS/neWtmCAo5bi444Gr5L+d5a2Y44GZ44KLKQ0KICAgICAgZmllbGRJZHMuZm9yRWFjaChpZCA9PiB7DQogICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsNCiAgICAgICAgaWYgKGlucHV0RWxlbWVudCkgew0KICAgICAgICAgIG1vZGVWYWx1ZXNbY3VycmVudE1vZGVdW2lkXSA9IHBhcnNlRmxvYXQoaW5wdXRFbGVtZW50LnZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICAvLyBtYXhSYXRlIOOCguS/neWtmA0KICAgICAgbW9kZVZhbHVlc1tjdXJyZW50TW9kZV0ubWF4UmF0ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXhSYXRlIikudmFsdWUsIDEwKTsNCg0KICAgICAgY29uc3QgbW9kZSA9IGN1cnJlbnRNb2RlOw0KICAgICAgY29uc3QgbWF4UmF0ZSA9IHBhcnNlSW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtYXhSYXRlIikudmFsdWUsIDEwKTsNCiAgICAgIGNvbnN0IHJlc3VsdExpbmVzID0gW107DQogICAgICBjb25zdCBrZXlzID0gWw0KICAgICAgICAiQWxsTW9uc3Rlckl0ZW1Ecm9wUmF0ZSIsDQogICAgICAgICJFYWNoTW9uc3Rlckl0ZW1Ecm9wUmF0ZSIsDQogICAgICAgICJFdmVudEl0ZW1Ecm9wUmF0ZSIsDQogICAgICAgICJTZXRJdGVtRHJvcFJhdGUiLA0KICAgICAgICAiWmVuRHJvcFJhdGUiDQogICAgICBdOw0KICAgICAgY29uc3QgaWRzID0gew0KICAgICAgICBBbGxNb25zdGVySXRlbURyb3BSYXRlOiAiYWxsTW9uc3RlciIsDQogICAgICAgIEVhY2hNb25zdGVySXRlbURyb3BSYXRlOiAiZWFjaE1vbnN0ZXIiLA0KICAgICAgICBFdmVudEl0ZW1Ecm9wUmF0ZTogImV2ZW50SXRlbSIsDQogICAgICAgIFNldEl0ZW1Ecm9wUmF0ZTogInNldEl0ZW0iLA0KICAgICAgICBaZW5Ecm9wUmF0ZTogInplbiINCiAgICAgIH07DQoNCiAgICAgIGlmICghbWF4UmF0ZSB8fCBtYXhSYXRlIDw9IDApIHsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdCIpLmlubmVySFRNTCA9ICI8YiBzdHlsZT0nY29sb3I6cmVkOyc+Tm9JdGVtUmF0ZSAoTUFYKSBtdXN0IGJlIGF0IGxlYXN0IDHvvIE8L2I+IjsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICBpZiAobW9kZSA9PT0gInBlcmNlbnRUb1JhdGUiKSB7DQogICAgICAgIGNvbnN0IGlucHV0cyA9IHt9Ow0KICAgICAgICBsZXQgdG90YWxQZXJjZW50ID0gMDsNCg0KICAgICAgICBrZXlzLmZvckVhY2goayA9PiB7DQogICAgICAgICAgaW5wdXRzW2tdID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZHNba10pLnZhbHVlKSB8fCAwOw0KICAgICAgICAgIHRvdGFsUGVyY2VudCArPSBpbnB1dHNba107DQogICAgICAgIH0pOw0KDQogICAgICAgIGlmICh0b3RhbFBlcmNlbnQgPiAxMDApIHsNCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0IikuaW5uZXJIVE1MID0gIjxiIHN0eWxlPSdjb2xvcjpyZWQ7Jz5Ub3RhbCBwcm9iYWJpbGl0eSBjYW5ub3QgZXhjZWVkIDEwMCUhPC9iPiI7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgbGV0IGN1cnJlbnRDYWxjdWxhdGVkUmF0ZSA9IDA7DQogICAgICAgIGxldCBwcmV2UmF0ZSA9IDA7DQogICAgICAgIGtleXMuZm9yRWFjaChrID0+IHsNCiAgICAgICAgICBjb25zdCByYXRlID0gTWF0aC5yb3VuZChjdXJyZW50Q2FsY3VsYXRlZFJhdGUgKyAoaW5wdXRzW2tdIC8gMTAwKSAqIG1heFJhdGUpOw0KICAgICAgICAgIGNvbnN0IHJhbmdlID0gcmF0ZSAtIHByZXZSYXRlOw0KICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAocmFuZ2UgLyBtYXhSYXRlKSAqIDEwMDsNCiAgICAgICAgICByZXN1bHRMaW5lcy5wdXNoKGAke2t9ID0gJHtyYXRlfSAgICAvLyA9ICR7cGVyY2VudC50b0ZpeGVkKDIpfSVgKTsNCiAgICAgICAgICBwcmV2UmF0ZSA9IHJhdGU7DQogICAgICAgICAgY3VycmVudENhbGN1bGF0ZWRSYXRlID0gcmF0ZTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgY29uc3Qgbm9JdGVtUmFuZ2UgPSBtYXhSYXRlIC0gY3VycmVudENhbGN1bGF0ZWRSYXRlOw0KICAgICAgICBjb25zdCBub0l0ZW1QZXJjZW50ID0gKG5vSXRlbVJhbmdlIC8gbWF4UmF0ZSkgKiAxMDA7DQogICAgICAgIHJlc3VsdExpbmVzLnB1c2goYE5vSXRlbVJhdGUgPSAke21heFJhdGV9ICAgIC8vID0gJHtub0l0ZW1QZXJjZW50LnRvRml4ZWQoMil9JWApOw0KDQogICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICJyYXRlVG9QZXJjZW50Iikgew0KICAgICAgICBjb25zdCByYXRlcyA9IHt9Ow0KICAgICAgICBrZXlzLmZvckVhY2goayA9PiB7DQogICAgICAgICAgcmF0ZXNba10gPSBwYXJzZUludChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZHNba10pLnZhbHVlLCAxMCkgfHwgMDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgLy8g6ZqO5bGk44OB44Kn44OD44Kv77yI5piH6aCG44Gn44Gq44GR44KM44Gw6K2m5ZGK77yJDQogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGNvbnN0IHByZXZLZXkgPSBrZXlzW2kgLSAxXTsNCiAgICAgICAgICBjb25zdCBjdXJyS2V5ID0ga2V5c1tpXTsNCiAgICAgICAgICBpZiAocmF0ZXNbcHJldktleV0gPiByYXRlc1tjdXJyS2V5XSkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdCIpLmlubmVySFRNTCA9IGA8YiBzdHlsZT0iY29sb3I6cmVkOyI+SGllcmFyY2hpY2FsIG9yZGVyIGVycm9yOiDjgIwke3ByZXZLZXl944CNKCR7cmF0ZXNbcHJldktleV19KSBleGNlZWRzIOOAjCR7Y3VycktleX3jgI0oJHtyYXRlc1tjdXJyS2V5XX0pIC48L2I+YDsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBsZXQgcHJldlJhdGUgPSAwOw0KICAgICAgICBrZXlzLmZvckVhY2goayA9PiB7DQogICAgICAgICAgY29uc3QgcmF0ZSA9IHJhdGVzW2tdOw0KICAgICAgICAgIGNvbnN0IHJhbmdlID0gcmF0ZSAtIHByZXZSYXRlOw0KICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAocmFuZ2UgLyBtYXhSYXRlKSAqIDEwMDsNCiAgICAgICAgICByZXN1bHRMaW5lcy5wdXNoKGAke2t9ID0gJHtyYXRlfSAgICAvLyA9ICR7cGVyY2VudC50b0ZpeGVkKDIpfSVgKTsNCiAgICAgICAgICBwcmV2UmF0ZSA9IHJhdGU7DQogICAgICAgIH0pOw0KDQogICAgICAgIGNvbnN0IG5vSXRlbVBlcmNlbnQgPSAoKG1heFJhdGUgLSBwcmV2UmF0ZSkgLyBtYXhSYXRlKSAqIDEwMDsNCiAgICAgICAgcmVzdWx0TGluZXMucHVzaChgTm9JdGVtUmF0ZSA9ICR7bWF4UmF0ZX0gICAgLy8gPSAke25vSXRlbVBlcmNlbnQudG9GaXhlZCgyKX0lYCk7DQogICAgICB9DQoNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHQiKS5pbm5lckhUTUwgPSByZXN1bHRMaW5lcy5qb2luKCJcbiIpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGxvYWRJbmlGaWxlKCkgew0KICAgICAgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luaUZpbGUnKTsgLy8g6Z2e6KGo56S644Gu44OV44Kh44Kk44Or5YWl5YqbDQogICAgICBjb25zdCBpbmlMb2FkU3RhdHVzRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmlMb2FkU3RhdHVzJyk7DQogICAgICBjb25zdCBzZWxlY3RlZEZpbGVOYW1lRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RlZEZpbGVOYW1lRGlzcGxheScpOyAvLyDpgbjmip7jg5XjgqHjgqTjg6vlkI3ooajnpLrnlKgNCg0KICAgICAgaW5pTG9hZFN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAiIjsgLy8g6Kqt44G/6L6844G/6ZaL5aeL5pmC44Gr44K544OG44O844K/44K544KS44Kv44Oq44KiDQogICAgICBpbmlMb2FkU3RhdHVzRWxlbWVudC5zdHlsZS5jb2xvciA9ICIiOyAvLyDoibLjgoLjg6rjgrvjg4Pjg4gNCiAgICAgIHNlbGVjdGVkRmlsZU5hbWVEaXNwbGF5LnRleHRDb250ZW50ID0gIiI7IC8vIOODleOCoeOCpOODq+WQjeihqOekuuOCguOCr+ODquOCog0KDQogICAgICBjb25zdCBmaWxlID0gZmlsZUlucHV0LmZpbGVzWzBdOw0KDQogICAgICBpZiAoIWZpbGUpIHsNCiAgICAgICAgaW5pTG9hZFN0YXR1c0VsZW1lbnQudGV4dENvbnRlbnQgPSAiSU5J44OV44Kh44Kk44Or44KS6YG45oqe44GX44Gm44GP44Gg44GV44GE77yBIjsNCiAgICAgICAgaW5pTG9hZFN0YXR1c0VsZW1lbnQuc3R5bGUuY29sb3IgPSAicmVkIjsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdCIpLmlubmVySFRNTCA9ICIiOyAvLyDntZDmnpzmrITjgoLjgq/jg6rjgqINCiAgICAgICAgc2VsZWN0ZWRGaWxlTmFtZURpc3BsYXkudGV4dENvbnRlbnQgPSAiTm90IHNlbGVjdGVkIjsgLy8g44OV44Kh44Kk44Or5ZCN6KGo56S644KS44Oq44K744OD44OIDQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCg0KICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgY29uc3QgY29udGVudCA9IGUudGFyZ2V0LnJlc3VsdDsNCiAgICAgICAgcGFyc2VJbmlDb250ZW50KGNvbnRlbnQsIGZpbGUubmFtZSk7IC8vIOODleOCoeOCpOODq+WQjeOCkua4oeOBmQ0KICAgICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJzsgLy8g44OV44Kh44Kk44Or5YWl5Yqb44KS44Oq44K744OD44OIDQogICAgICB9Ow0KDQogICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBpbmlMb2FkU3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9ICLjg5XjgqHjgqTjg6vjga7oqq3jgb/ovrzjgb/kuK3jgavjgqjjg6njg7zjgYznmbrnlJ/jgZfjgb7jgZfjgZ/jgIIiOw0KICAgICAgICBpbmlMb2FkU3RhdHVzRWxlbWVudC5zdHlsZS5jb2xvciA9ICJyZWQiOw0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0IikuaW5uZXJIVE1MID0gIiI7IC8vIOe1kOaenOashOOCguOCr+ODquOCog0KICAgICAgICBzZWxlY3RlZEZpbGVOYW1lRGlzcGxheS50ZXh0Q29udGVudCA9ICJOb3Qgc2VsZWN0ZWQiOyAvLyDjg5XjgqHjgqTjg6vlkI3ooajnpLrjgpLjg6rjgrvjg4Pjg4gNCiAgICAgICAgZmlsZUlucHV0LnZhbHVlID0gJyc7IC8vIOOCqOODqeODvOaZguOCguODquOCu+ODg+ODiA0KICAgICAgfTsNCg0KICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7DQogICAgfQ0KDQogICAgLy8gcGFyc2VJbmlDb250ZW506Zai5pWw44GrZmlsZV9uYW1l5byV5pWw44KS6L+95YqgDQogICAgZnVuY3Rpb24gcGFyc2VJbmlDb250ZW50KGNvbnRlbnQsIGZpbGVfbmFtZSkgew0KICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcbicpOw0KICAgICAgY29uc3QgaW5pVmFsdWVzID0ge307DQogICAgICBjb25zdCBleHBlY3RlZEtleXMgPSBbDQogICAgICAgICJBbGxNb25zdGVySXRlbURyb3BSYXRlIiwNCiAgICAgICAgIkVhY2hNb25zdGVySXRlbURyb3BSYXRlIiwNCiAgICAgICAgIkV2ZW50SXRlbURyb3BSYXRlIiwNCiAgICAgICAgIlNldEl0ZW1Ecm9wUmF0ZSIsDQogICAgICAgICJaZW5Ecm9wUmF0ZSIsDQogICAgICAgICJOb0l0ZW1SYXRlIg0KICAgICAgXTsNCiAgICAgIGxldCBtaXNzaW5nS2V5cyA9IFtdOw0KICAgICAgY29uc3QgaW5pTG9hZFN0YXR1c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5pTG9hZFN0YXR1cycpOw0KICAgICAgY29uc3Qgc2VsZWN0ZWRGaWxlTmFtZURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0ZWRGaWxlTmFtZURpc3BsYXknKTsNCg0KICAgICAgbGluZXMuZm9yRWFjaChsaW5lID0+IHsNCiAgICAgICAgY29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTsNCiAgICAgICAgaWYgKHRyaW1tZWRMaW5lICYmICF0cmltbWVkTGluZS5zdGFydHNXaXRoKCc7JykgJiYgdHJpbW1lZExpbmUuaW5jbHVkZXMoJz0nKSkgew0KICAgICAgICAgIGNvbnN0IHBhcnRzID0gdHJpbW1lZExpbmUuc3BsaXQoJz0nKTsNCiAgICAgICAgICBjb25zdCBrZXkgPSBwYXJ0c1swXS50cmltKCk7DQogICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChwYXJ0c1sxXS50cmltKCksIDEwKTsNCiAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkgew0KICAgICAgICAgICAgaW5pVmFsdWVzW2tleV0gPSB2YWx1ZTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KDQogICAgICBleHBlY3RlZEtleXMuZm9yRWFjaChrZXkgPT4gew0KICAgICAgICBpZiAoaW5pVmFsdWVzW2tleV0gPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgIG1pc3NpbmdLZXlzLnB1c2goa2V5KTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQoNCiAgICAgIGlmIChtaXNzaW5nS2V5cy5sZW5ndGggPiAwKSB7DQogICAgICAgIGxldCBlcnJvck1lc3NhZ2U7DQogICAgICAgIGlmIChtaXNzaW5nS2V5cy5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgJyR7bWlzc2luZ0tleXNbMF19JyBjb3VsZCBub3QgYmUgZm91bmQuYDsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBgJyR7bWlzc2luZ0tleXNbMF19JyBjb3VsZCBub3QgYmUgZm91bmQuYDsNCiAgICAgICAgfQ0KICAgICAgICBpbmlMb2FkU3RhdHVzRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTsNCiAgICAgICAgaW5pTG9hZFN0YXR1c0VsZW1lbnQuc3R5bGUuY29sb3IgPSAicmVkIjsNCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlc3VsdCIpLmlubmVySFRNTCA9ICI8YiBzdHlsZT0nY29sb3I6cmVkOyc+Q29ycmVjdCBJTkkgZmlsZSBpcyByZXF1aXJlZC48L2I+IjsgLy8g57WQ5p6c5qyE44Gr44KC6KOc6LazDQogICAgICAgIHNlbGVjdGVkRmlsZU5hbWVEaXNwbGF5LnRleHRDb250ZW50ID0gIk5vdCBzZWxlY3RlZCI7IC8vIOOCqOODqeODvOaZguOBr+ODleOCoeOCpOODq+WQjeOCguOCr+ODquOCog0KICAgICAgICByZXR1cm47DQogICAgICB9DQoNCiAgICAgIC8vIElOSeODleOCoeOCpOODq+OBi+OCieiqreOBv+i+vOOCk+OBoOWApOOCkiByYXRlVG9QZXJjZW50IOODouODvOODieOBruiomOaGtumgmOWfn+OBq+ioreWumg0KICAgICAgbW9kZVZhbHVlcy5yYXRlVG9QZXJjZW50LmFsbE1vbnN0ZXIgPSBpbmlWYWx1ZXMuQWxsTW9uc3Rlckl0ZW1Ecm9wUmF0ZTsNCiAgICAgIG1vZGVWYWx1ZXMucmF0ZVRvUGVyY2VudC5lYWNoTW9uc3RlciA9IGluaVZhbHVlcy5FYWNoTW9uc3Rlckl0ZW1Ecm9wUmF0ZTsNCiAgICAgIG1vZGVWYWx1ZXMucmF0ZVRvUGVyY2VudC5ldmVudEl0ZW0gPSBpbmlWYWx1ZXMuRXZlbnRJdGVtRHJvcFJhdGU7DQogICAgICBtb2RlVmFsdWVzLnJhdGVUb1BlcmNlbnQuc2V0SXRlbSA9IGluaVZhbHVlcy5TZXRJdGVtRHJvcFJhdGU7DQogICAgICBtb2RlVmFsdWVzLnJhdGVUb1BlcmNlbnQuemVuID0gaW5pVmFsdWVzLlplbkRyb3BSYXRlOw0KICAgICAgbW9kZVZhbHVlcy5yYXRlVG9QZXJjZW50Lm1heFJhdGUgPSBpbmlWYWx1ZXMuTm9JdGVtUmF0ZTsgLy8gbWF4UmF0ZSDjgoJJTknjgYvjgonoqq3jgb/ovrzjgoANCg0KICAgICAgLy8gcGVyY2VudFRvUmF0ZSDjg6Ljg7zjg4njga7lgKTjgpLliJ3mnJ/lgKTjgavjg6rjgrvjg4Pjg4gNCiAgICAgIC8vIOOBn+OBoOOBl+OAgW1heFJhdGXjga8gcGVyY2VudFRvUmF0ZSDjg6Ljg7zjg4njga7jg4fjg5Xjgqnjg6vjg4jlgKQgKDI1MDApIOOBq+aIu+OBmQ0KICAgICAgLy8g5LuW44Gu44OV44Kj44O844Or44OJ44GvIElOSeODleOCoeOCpOODq+iqreOBv+i+vOOBv+OBqOOBr+mWouS/guOBquOBhOOBruOBp+OAgXBlcmNlbnRUb1JhdGUg44Gu54++6KGM5YCk44KS57at5oyBDQogICAgICBtb2RlVmFsdWVzLnBlcmNlbnRUb1JhdGUgPSB7DQogICAgICAgIGFsbE1vbnN0ZXI6IG1vZGVWYWx1ZXMucGVyY2VudFRvUmF0ZS5hbGxNb25zdGVyLCAvLyDml6LlrZjjga7lgKTjgpLkv53mjIENCiAgICAgICAgZWFjaE1vbnN0ZXI6IG1vZGVWYWx1ZXMucGVyY2VudFRvUmF0ZS5lYWNoTW9uc3RlciwNCiAgICAgICAgZXZlbnRJdGVtOiBtb2RlVmFsdWVzLnBlcmNlbnRUb1JhdGUuZXZlbnRJdGVtLA0KICAgICAgICBzZXRJdGVtOiBtb2RlVmFsdWVzLnBlcmNlbnRUb1JhdGUuc2V0SXRlbSwNCiAgICAgICAgemVuOiBtb2RlVmFsdWVzLnBlcmNlbnRUb1JhdGUuemVuLA0KICAgICAgICBtYXhSYXRlOiAyNTAwIC8vIHBlcmNlbnRUb1JhdGUg44Oi44O844OJ44GuIG1heFJhdGUg44Gv5bi444Gr5Yid5pyf5YCk44Gr5oi744GZDQogICAgICB9Ow0KDQoNCiAgICAgIGNoYW5nZU1vZGUoInJhdGVUb1BlcmNlbnQiLCBmYWxzZSk7IC8vIElOSeiqreOBv+i+vOOBv+aZguOBryBSYXRlIC0+ICUg44Oi44O844OJ44Gr5YiH44KK5pu/44GI44CB54++5Zyo44Gu5YCk44KS5L+d5a2Y44GX44Gq44GEDQoNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXN1bHQiKS5pbm5lckhUTUwgPSAiIjsgLy8g6KiI566X57WQ5p6c44KS44Kv44Oq44KiDQogICAgICBjYWxjdWxhdGUoKTsgLy8g6KiI566X44KS5a6f6KGM44GX44CB57WQ5p6c44KS6KGo56S6DQoNCiAgICAgIGluaUxvYWRTdGF0dXNFbGVtZW50LnRleHRDb250ZW50ID0gIlN1Y2Nlc3NmdWxseSBsb2FkZWQuIjsNCiAgICAgIGluaUxvYWRTdGF0dXNFbGVtZW50LnN0eWxlLmNvbG9yID0gImdyZWVuIjsNCiAgICAgIHNlbGVjdGVkRmlsZU5hbWVEaXNwbGF5LnRleHRDb250ZW50ID0gYCR7ZmlsZV9uYW1lfWA7IC8vIOiqreOBv+i+vOOCk+OBoOODleOCoeOCpOODq+WQjeOCkuihqOekug0KICAgIH0NCiAgPC9zY3JpcHQ+DQogIDxub3NjcmlwdD4NCiAgICA8ZGl2IGNsYXNzPSJub1NjcmlwdEFyZWEiPg0KICAgICAgICA8aDI+SmF2YVNjcmlwdCByZXF1aXJlZC48L2gyPg0KICAgIDwvZGl2Pg0KICA8L25vc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPg=="; 
        console.log("originalContentRaw (in A_edited.html) length:", originalContentRaw.length);
        console.log("originalContentRaw (in A_edited.html) first 100 chars:", originalContentRaw.substring(0, 100) + "...");
        
        
                        function simpleDecrypt(encodedStr) {
                            try {
                                console.log("--- simpleDecrypt (not encrypted) debugging ---");
                                console.log("Attempting to decode Base64 string length:", encodedStr.length);
                                console.log("First 100 chars:", encodedStr.substring(0, 100) + "...");
                                return decodeURIComponent(escape(atob(encodedStr)));
                            } catch (e) {
                                console.error("デコードエラー (decoding error):", e);
                                console.error("エラーが発生した文字列の長さ (length of string that caused error):", encodedStr.length);
                                console.error("エラーが発生した文字列 (string that caused error) first 100 chars:", encodedStr.substring(0, 100) + "...");
                                return "デコードに失敗しました。エラー: " + e.message;
                            }
                        }
                     // 定義した復号化関数を埋め込む

        document.getElementById('submitPassword').addEventListener('click', () => {
            const enteredPassword = document.getElementById('pagePassword').value;
            const enteredEncodedPassword = btoa(enteredPassword);

            if (enteredEncodedPassword === correctEncodedPassword) {
                document.getElementById('passwordPrompt').style.display = 'none';
                const iframe = document.getElementById('contentIframe');
                iframe.style.display = 'block'; 

                const finalContent = simpleDecrypt(originalContentRaw);
                console.log("Final content after decryption length:", finalContent.length);
                
                // iframeのsrcdocに復号化したHTMLコンテンツを設定
                iframe.srcdoc = finalContent;
                console.log("Content loaded into iframe.");
                
            } else {
                document.getElementById('errorMessage').style.display = 'block';
                console.log("Incorrect password");
            }
        });
    </script>
</body>
</html>
                
